[build-system]
requires = ["setuptools", "wheel", "Cython","numpy","protobuf"]
[tool.cibuildwheel]
before-build = [
"pip install -r requirements_dev.txt",
]
test-command = "python {project}/test/test.py"
[tool.cibuildwheel.linux]
before-all = "bash install_prereqs.sh && bash install_openssl3.sh && bash install_genomicsdbforwheel.sh"
environment = { LD_LIBRARY_PATH="/usr/local/lib64:/usr/local/lib:$LD_LIBRARY_PATH", OPENSSL_ROOT_DIR="/usr/local"}
skip = "pp* *-manylinux_i686 *_ppc64le *_s390x *musll*"
repair-wheel-command = "DEST=`awk -F'/' '{ a = length($NF) ? $NF : $(NF-1); print a }' <<< {wheel}` && mv {wheel} {dest_dir} && mv {dest_dir}/${DEST} {dest_dir}/${DEST//-linux_/-manylinux_2_17_x86_64.manylinux2014_}"
[tool.cibuildwheel.macos]
before-build = "echo $GENOMICSDB_HOME"
before-all = "bash install_prereqs_mac.sh && bash install_genomicsdbformac.sh"